(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();class D{game_division=document.createElement("div");game=document.createElement("div");startDivision=document.createElement("div");userAttemps=document.createElement("div");attemps=document.createElement("p");images=["1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png"];imgId=[0,1,2,3,4,5,6,7];path="./img/";count=0;size=0;flipped=0;index=0;flipedCard=!0;startButtons=[];currentCard=null;openCard=null;constructor(){this.game_division.classList.add("game_division"),this.game.classList.add("memoryGame"),this.userAttemps.classList.add("Attemps"),this.attemps.style.color="white",this.attemps.innerHTML=`User attemps: ${this.count}`,this.userAttemps.appendChild(this.attemps),this.startDivision.classList.add("startDiv"),this.createStartdiv()}createStartdiv(){this.game_division.replaceChildren(),this.startDivision.replaceChildren();const e=document.createElement("img");e.classList.add("logo"),e.src="./img/memory.png",this.startDivision.appendChild(e);const t=document.createElement("select");t.classList.add("grid"),[{text:"Easy",value:"2"},{text:"Medium",value:"3"},{text:"Challenging",value:"4"}].forEach(a=>{const r=document.createElement("option");r.value=a.value,r.textContent=a.text,t.appendChild(r)}),this.startDivision.appendChild(t);const s=document.createElement("button");s.textContent="Start Game",s.onclick=()=>this.startGame(t.value),this.startDivision.appendChild(s),this.game_division.appendChild(this.startDivision)}startGame(e){this.game_division.replaceChildren(),this.game.replaceChildren(),this.game.style.display="grid",e==="2"?(this.size=2,this.game.style.gridTemplateColumns="repeat(2, 1fr)"):e==="3"?(this.size=Math.floor(3)*2,this.game.style.gridTemplateColumns="repeat(3, 1fr)"):e==="4"&&(this.size=7*2,this.game.style.gridTemplateColumns="repeat(4, 1fr)"),this.creatGame()}createBtn(e,t){const i=document.createElement("button");i.classList.add("startBtn"),i.innerText=e,i.onclick=this.buttonListner(t),this.startDivision.appendChild(i),this.game_division.append(this.startDivision),this.startButtons.push(i)}getDiv(){return this.game_division}creatGame(){this.game.replaceChildren();const e=document.createElement("div"),t=document.createElement("button");t.classList.add("hintButton"),t.innerText="Hints",e.classList.add("topOfGame"),e.appendChild(t),e.appendChild(this.attemps),this.currentCard=null,this.openCard=null,this.index=0,this.count=0,this.flipped=0,this.attemps.innerHTML=`Attempes: ${this.count}`,this.game_division.appendChild(e),this.game_division.appendChild(this.game);const i=[],s=[];this.imgId.sort(()=>Math.random()-.5);let a=0;for(const d of this.imgId){if(a===this.size)break;const o=document.createElement("div");o.classList.add("CardDivision");const l=document.createElement("img");l.classList.add("backside"),o.appendChild(l);const m=document.createElement("img");m.classList.add("card"),m.src=`${this.path}${this.images[d]}`,m.id=d,o.appendChild(m),this.game.appendChild(o),s.push(o.cloneNode(!0)),i.push(o),a++}s.sort(()=>Math.random()-.5),s.forEach(d=>{i.push(d),this.game.appendChild(d)}),i.forEach(d=>{d.classList.toggle("flipped")}),setTimeout(()=>{i.forEach(d=>{d.classList.toggle("flipped"),this.addCardListener(d)})},2e3),this.game_division.parentElement.parentElement.addEventListener("keydown",this.keyBound),this.game_division.parentElement.parentElement.tabIndex=0,this.game_division.parentElement.parentElement.focus(),this.game_division.addEventListener("mouseover",d=>{this.currentCard!==null&&this.currentCard.classList.remove("currentCard")});let r=3;setTimeout(()=>{t.addEventListener("click",()=>{if(r===0){t.innerHTML="Amount of hints 0 left";return}this.flipedCard=!1;let d=i[Math.random()*i.length|0];d.classList.contains("flipped")&&i.forEach(o=>{if(!o.classList.contains("flipped")){d=o;return}}),d.classList.toggle("flipped"),setTimeout(()=>{d.classList.toggle("flipped"),this.flipedCard=!0},500),r--})},2e3)}async flip(e){if(!this.flipedCard)return;let t=e.target.parentElement;t.classList.contains("CardDivision")||(t=e.target),t.classList.contains("CardDivision")||(t=this.currentCard),this.openCard===null?(t.classList.toggle("flipped"),this.openCard=t,this.removeCardListener(this.openCard)):this.openCard.childNodes[1].id===t.childNodes[1].id?(t.classList.toggle("flipped"),this.flipedCard=!1,await new Promise(()=>setTimeout(async()=>{this.openCard.childNodes[1].classList.add("correct"),t.childNodes[1].classList.add("correct"),await new Promise(()=>setTimeout(()=>{this.openCard.childNodes[1].classList.remove("correct"),t.childNodes[1].classList.remove("correct"),this.openCard=null,this.removeCardListener(t),this.flipedCard=!0,this.count++,this.attemps.innerHTML=`Attemps: ${this.count}`,this.flipped++,this.checkForWin()},750))},200))):(this.flipedCard=!1,t.classList.toggle("flipped"),await new Promise(()=>setTimeout(async()=>{this.openCard.childNodes[1].classList.add("wrong"),t.childNodes[1].classList.add("wrong"),await new Promise(()=>setTimeout(()=>{this.openCard.childNodes[1].classList.remove("wrong"),t.childNodes[1].classList.remove("wrong"),t.classList.toggle("flipped"),this.openCard.classList.toggle("flipped"),this.addCardListener(this.openCard),this.openCard=null,this.flipedCard=!0,this.count++,this.attemps.innerHTML=`Attemps: ${this.count}`},750))},200)))}flipBound=e=>{this.flip(e)};keyBound=e=>{this.keys(e)};checkForWin(){if(this.flipped===this.size){const e=document.createElement("p");e.innerText=`You won in ${this.count} attemps!`,e.classList.add("win");const t=document.createElement("button");t.innerText="Play Again",t.classList.add("playagain-button"),t.addEventListener("click",()=>{this.game_division.replaceChildren(),this.createStartdiv()}),this.game_division.replaceChildren(),this.game_division.appendChild(e),this.game_division.appendChild(t)}}addCardListener(e){e.addEventListener("click",this.flipBound)}removeCardListener(e){e.removeEventListener("click",this.flipBound)}keys(e){if(this.currentCard==null)this.currentCard=this.game.childNodes[0],this.currentCard.classList.add("currentCard"),this.index=0;else{if(e.key==="ArrowRight"&&(this.index++,this.index>=this.game.childNodes.length&&(this.index=0),this.currentCard.classList.remove("currentCard"),this.currentCard=this.game.childNodes[this.index],this.currentCard.classList.add("currentCard")),e.key==="ArrowUp"){const t=this.size==2?4:this.size;this.index<t/2||(this.index-=t/2,this.currentCard.classList.remove("currentCard"),this.currentCard=this.game.childNodes[this.index],this.currentCard.classList.add("currentCard"))}if(e.key==="ArrowLeft"&&(this.index--,this.index<0&&(this.index=this.game.childNodes.length-1),this.currentCard.classList.remove("currentCard"),this.currentCard=this.game.childNodes[this.index],this.currentCard.classList.add("currentCard")),e.key==="ArrowDown"){const t=this.size==2?4:this.size;this.index>=this.game.childNodes.length-t/2||(this.index+=t/2,this.currentCard.classList.remove("currentCard"),this.currentCard=this.game.childNodes[this.index],this.currentCard.classList.add("currentCard"))}if(e.key==="Enter"||e.key===" "){if(this.currentCard.classList.contains("flipped"))return;this.flip(e)}}}}const u={ws:null,listeners:[],init:function(n){return this.ws===null&&(this.ws=new WebSocket("wss://courselab.lnu.se/message-app/socket"),this.ws.addEventListener("message",e=>{const t=JSON.parse(e.data);t.type==="hearbeat"||t.username==="Server"||JSON.parse(e.data).username==="The Server"||JSON.parse(e.data).username==="Server"||(this.cacheMsgs([JSON.parse(e.data).username,JSON.parse(e.data).data,JSON.parse(e.data).channel]),this.notify(e))}),this.ws.addEventListener("close",()=>{this.ws=null,this.listeners=[]})),this.listeners.push(n),n.readCachedMsgs("General"),this.ws},remove:function(n){this.listeners=this.listeners.filter(e=>e!==n),this.listeners.length===0&&this.ws.close()},notify:function(n){this.listeners.forEach(e=>{e.newMessage(n)})},cacheMsgs:function(n){let e=JSON.parse(localStorage.getItem("Any")),t=null;const i=n[2];if(i&&i.toLowerCase()==="general"||i.toLowerCase()==="encrypted"){for(t=JSON.parse(localStorage.getItem(i)),t===null&&(t=[]),t.push({username:n[0],msg:n[1],time:new Date().toLocaleTimeString()});t.length>30;)t.shift();localStorage.setItem(i,JSON.stringify(t))}for(e===null&&(e=[]),e.push({username:n[0],msg:n[1],time:new Date().toLocaleTimeString(),channel:n[2]});e.length>30;)e.shift();localStorage.setItem("Any",JSON.stringify(e))}};class S{#e="eDBE76deU7L0H9mEBgxUKVR0VCnq0XBd";nameVerfier=e=>{this.checkName(e)};constructor(){this.chat=document.createElement("div"),this.chat.classList.add("chat"),this.chatBody=document.createElement("div"),this.chatInput=document.createElement("input"),this.chatInput.classList.add("chatInput"),this.wbs={type:"message",data:"",username:localStorage.getItem("username")||"",channel:"General",key:this.#e},this.bindEvents(),this.initializeChat()}getDiv(){return this.chat}checkName(e){e.preventDefault();const t=document.querySelector(".username"),i=/[^a-zA-Z0-9]/g;if(t.value==="")alert("Must enter name!");else if(i.test(t.value))alert("Please enter a valid name!");else{const s=t.value;localStorage.setItem("username",s),this.wbs.username=s,this.chat.removeChild(this.chat.childNodes[0]),this.createChatDivision()}}newMessage(e){const t=document.createElement("div");t.style.backgroundColor="grey",t.style.color="black",t.style.borderRadius="5px";const i=document.createElement("p");i.innerHTML="Channel: "+JSON.parse(e.data).channel+" | "+new Date().toLocaleString();const s=document.createElement("P");s.classList.add("msg"),JSON.parse(e.data).username===this.wbs.username&&(t.style.backgroundColor="darkgrey",t.style.marginLeft="28%"),s.innerHTML=JSON.parse(e.data).username+": "+JSON.parse(e.data).data,t.appendChild(s),t.appendChild(i),this.wbs.channel==="General"?(JSON.parse(e.data).channel==="General"||JSON.parse(e.data).channel==="general")&&this.chatBody.appendChild(t):this.wbs.channel==="Encrypted"?(JSON.parse(e.data).channel==="Encrypted"||JSON.parse(e.data).channel==="encrypted")&&(s.innerHTML=JSON.parse(e.data).username+": "+this.decrypt(JSON.parse(e.data).data),this.chatBody.appendChild(t)):this.chatBody.appendChild(t),this.chatBody.scrollTop=this.chatBody.scrollHeight}bindEvents(){this.chat.addEventListener("max",()=>{this.chatBody.classList.add("max"),this.chatBody.scrollTop=this.chatBody.scrollHeight}),this.chat.addEventListener("min",()=>{this.chatBody.classList.add("max"),this.chatBody.scrollTop=this.chatBody.scrollHeight}),this.chatInput.addEventListener("keyup",e=>{e.key==="Enter"&&this.sendMessage(this.chatInput.value)})}initializeChat(){!this.wbs.username||this.wbs.username==="undefined"?this.createUserNameDiv():this.createChatDivision()}createUserNameDiv(){const e=document.createElement("namediv"),t=document.createElement("Inputdiv"),i=document.createElement("h1");i.innerHTML="Welcome to the Chat Application!!",e.appendChild(i);const s=document.createElement("h3");s.innerHTML="Please Enter a user name to start chatting.",e.appendChild(s),e.classList.add("userNameDiv"),t.classList.add("username"),t.placeHolder="Username",t.addEventListener("focus",r=>{t.placeHolder=""}),t.addEventListener("blur",r=>{t.placeHolder="Username"}),t.addEventListener("keyup",r=>{switch(r.key){case"Enter":this.checkName(r);break}});const a=document.createElement("button");a.classList.add("nameBtn"),a.innerHTML="Set username",e.appendChild(t),e.appendChild(a),a.addEventListener("click",this.nameVerfier),this.chat.appendChild(e)}initWebsocket(){u.init(this),this.chat.addEventListener("closeSocket",()=>{u.remove(this)})}createChatDivision(){const e=document.createElement("div");e.classList.add("chatDivision");const t=this.chatHeader();e.appendChild(t),this.chatBody=document.createElement("div"),this.chatBody.classList.add("chatBody"),e.appendChild(this.chatBody);const i=this.chatFooter();e.appendChild(i),this.chat.appendChild(e),this.initWebsocket()}sendMsg(e){if(!this.wbs.username){alert("Please enter a name before starting a chat!");return}!u.ws||u.ws.readyState!==WebSocket.OPEN||(this.wbs.channel==="Encrypted"?this.wbs.data=this.encrypt(e):this.wbs.data=e,console.log("here"),u.ws.send(JSON.stringify(this.wbs)))}encrypt(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)^this.#e.charCodeAt(i%this.#e.length));return t}decrypt(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)^this.#e.charCodeAt(i%this.#e.length));return t}chatHeader(){const e=document.createElement("div");e.classList.add("chatheader");const t=document.createElement("div"),i=document.createElement("p");i.classList.add("username-display"),i.innerHTML="Username: "+localStorage.getItem("username"),t.appendChild(i);const s=document.createElement("input");s.type="text",s.classList.add("username-input");const a=document.createElement("button");a.classList.add("changeUserBtn"),a.innerHTML="Change user",t.appendChild(a),s.addEventListener("keyup",p=>{switch(p.key){case"Enter":/[^a-zA-Z0-9]/g.test(s.value)?alert("Please enter a valid username"):(localStorage.setItem("username",s.value),i.innerHTML="Username: "+localStorage.getItem("username"),t.removeChild(s),t.appendChild(a),this.wbs.username=localStorage.getItem("username"));break}}),s.addEventListener("blur",p=>{new Promise(x=>setTimeout(()=>{t.contains(s)&&(t.removeChild(s),t.appendChild(a))},10)),i.innerHTML="Username: "+localStorage.getItem("username")}),a.addEventListener("click",p=>{i.innerHTML="Username: ",t.replaceChildren(i,s),s.focus()}),e.appendChild(t);const r=document.createElement("div"),d=document.createElement("p");d.innerHTML="Channel";const o=document.createElement("select");o.classList.add("channelSelect");const l=document.createElement("option");l.innerHTML="General";const m=document.createElement("option");m.innerHTML="Encrypted";const E=document.createElement("option");E.innerHTML="Any",o.addEventListener("change",p=>{this.wbs.channel=o.options[o.selectedIndex].value,this.readCachedMsgs(this.wbs.channel)}),o.appendChild(l),o.appendChild(m),o.appendChild(E),d.appendChild(o),r.appendChild(d);const g=document.createElement("button");return g.classList.add("clearBtn"),g.innerHTML="Clear/delete chat history",g.addEventListener("click",p=>{p.preventDefault(),this.chatBody.innerHTML="",localStorage.setItem(this.wbs.channel,null)}),r.appendChild(g),e.appendChild(r),e}chatFooter(){const e=document.createElement("div");e.classList.add("chatFooter");const t=document.createElement("Button");t.classList.add("emojiButton"),t.innerHTML="ðŸ˜€";const i=this.generatEmojies();i.style.display="none",e.appendChild(i),t.addEventListener("click",r=>{i.style.display==="none"?i.style.display="block":i.style.display="none"}),e.appendChild(t),this.chatInput=document.createElement("Input"),this.chatInput.classList.add("chatInput"),this.chatInput.placeHolder="Message",this.chatInput.addEventListener("keyup",r=>{switch(r.key){case"Enter":if(this.chatInput.value==="")break;this.sendMsg(this.chatInput.value),this.chatInput.value="";break}}),e.appendChild(this.chatInput);const s=document.createElement("BUTTON");s.classList.add("chatButton"),s.innerHTML="Send",s.addEventListener("click",r=>{this.chatInput.vlaue!==""&&(this.sendMsg(this.chatInput.value),this.chatInput.value="")});const a=document.createElement("button");return a.classList.add("refreshbutton"),a.innerHTML="Refresh",a.addEventListener("click",()=>{this.refreshMessages()}),e.appendChild(a),e.appendChild(s),e}refreshMessages(){this.chatBody.innerHTML="",this.readCachedMsgs(this.wbs.channel)}generatEmojies(){const e=[[128512,128592],[128636,128700]],t=document.createElement("div");t.classList.add("emojiContainer");const i=document.createDocumentFragment(),s=(a,r)=>{for(let d=a;d<r;d++){const o=String.fromCodePoint(d),l=document.createElement("button");l.innerHTML=o,l.addEventListener("click",()=>{this.chatInput.value+=o,t.style.display="none"}),i.appendChild(l)}};return e.forEach(a=>s(a[0],a[1])),t.appendChild(i),t}readCachedMsgs(e){this.chatBody.replaceChildren();const t=JSON.parse(localStorage.getItem(e));t!==null&&(t.forEach(i=>{const s=document.createElement("div");s.style.color="white",s.style.borderRadius="5px",s.style.padding="10px",s.style.marginBottom="10px",i.username===this.wbs.username?s.style.backgroundColor="darkgrey":s.style.backgroundColor="black";const a=document.createElement("p");a.innerHTML=`${i.username}: ${e==="Encrypted"?this.decrypt(i.msg):i.msg}`;const r=document.createElement("p");r.innerHTML=`Channel: ${e==="Any"?i.channel:e} | ${i.time}`,s.appendChild(a),s.appendChild(r),this.chatBody.appendChild(s)}),this.chatBody.scrollTop=this.chatBody.scrollHeight)}}let M=class{game_division=document.createElement("div");game=document.createElement("div");userAttempts=document.createElement("div");attempts=document.createElement("p");board=Array(9).fill(null);isGameOver=!1;index=0;mode="PvP";playerNames={X:"Player 1",O:"Player 2"};playerScores={X:0,O:0};constructor(){this.game_division.classList.add("gameDiv"),this.game_division.tabIndex=0,this.game.classList.add("game"),this.userAttempts.classList.add("attemps"),this.userAttempts.appendChild(this.attempts),this.game_division.appendChild(this.userAttempts),this.game_division.appendChild(this.game),this.createControlPanel(),this.game_division.addEventListener("keydown",this.handleKey.bind(this))}createControlPanel(){const e=document.createElement("div");e.classList.add("control-panel"),this.controlPanel=e;const t=document.createElement("button");t.textContent="Start Game",t.id="startButton";const i=document.createElement("button");i.textContent="Quit",i.id="quitButton",i.style.display="none",t.addEventListener("click",()=>{this.startGame(),t.style.display="none",i.style.display="block"});const s=document.createElement("p");s.textContent=`Score: ${this.playerNames.X}: ${this.playerScores.X} | ${this.playerNames.O}: ${this.playerScores.O}`;const a=document.createElement("button");a.textContent="Restart",a.addEventListener("click",()=>this.resetGame()),i.addEventListener("click",()=>this.quitGame()),e.appendChild(t),e.appendChild(s),e.appendChild(a),e.appendChild(i),this.gameStarted=!1,this.game_division.appendChild(e),this.GameBoard()}GameBoard(){this.game.innerHTML="";for(let e=0;e<9;e++){const t=document.createElement("div");t.classList.add("cells"),t.tabIndex=0,t.addEventListener("click",()=>this.handleClick(e)),t.addEventListener("keydown",i=>this.handleKey(i,e)),this.game.appendChild(t)}}handleClick(e){if(!(!this.gameStarted||this.isGameOver||this.board[e])){if(this.board[e]=this.currentPlayer,this.updateBoard(),this.checkWinner()){this.attempts.innerHTML=`Player ${this.currentPlayer} Wins!`,this.isGameOver=!0;return}this.swicthPlayer()}}handleKey(e,t){switch(this.game.children[this.index]&&this.game.children[this.index].classList.remove("focus-cell"),e.key){case"ArrowUp":t>2&&this.focusCell(t-3);break;case"ArrowDown":t<6&&this.focusCell(t+3);break;case"ArrowLeft":t%3!==0&&this.focusCell(t-1);break;case"ArrowRight":(t+1)%3!==0&&this.focusCell(t+1);break;case"Enter":this.handleClick(t);break}this.focusCell(this.index)}focusCell(e){this.index=e;const t=this.game.children[e];t&&(t.focus(),t.classList.add("focus-cell"))}updateBoard(){this.board.forEach((e,t)=>{this.game.children[t].textContent=e})}getDiv(){return this.game_division}swicthPlayer(){this.currentPlayer=this.currentPlayer==="X"?"O":"X",this.attempts.innerHTML=`Current Player: ${this.currentPlayer}`}checkWinner(){return[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].some(t=>t.every(i=>this.board[i]===this.currentPlayer))?(this.attempts.innerHTML=`Player ${this.currentPlayer} Wins!`,this.isGameOver=!0,document.getElementById("startButton").style.display="block",this.playerScores[this.currentPlayer]++,this.controlPanel.querySelector("p").textContent=`Score:  ${this.playerNames.X}: ${this.playerScores.X} | ${this.playerNames.O}: ${this.playerScores.O}`,!0):!1}resetGame(){this.board.fill(null),this.updateBoard(),this.currentPlayer="X",this.isGameOver=!1,this.attempts.innerHTML="Current Player: X"}startGame(){this.resetBoard(),this.isGameOver=!1,this.gameStarted=!0,this.updateBoard(),this.attempts.innerHTML=`Current Player: ${this.currentPlayer}`,this.focusCell(0)}restartGame(){this.resetBoard(),this.updateBoard(),this.attempts.innerHTML="Game restarted. Current Player: X"}quitGame(){this.resetBoard(),this.updateBoard(),this.isGameOver=!0,this.playerScores={X:0,O:0};const e=this.controlPanel.querySelector("p");e&&(e.textContent=`Score: ${this.playerNames.X}: ${this.playerScores.X} | ${this.playerNames.O}: ${this.playerScores.O}`),this.attempts.innerHTML="Game quit. Press Start to play again.",document.getElementById("startButton").style.display="block",this.controlPanel.querySelector("#startButton").style.display="block",this.controlPanel.querySelector("#quitButton").style.display="none",this.gameStarted=!1}resetBoard(){this.board.fill(null),this.currentPlayer="X"}};class N{window=document.createElement("div");topBar=new T(this);moving=!1;initialMousePos={x:0,y:0};container=document.createElement("div");Index=0;title="";downBound=e=>{this.mouseDown(e)};upBound=()=>{this.mouseUp()};moveBound=e=>{this.moveWindow(e)};constructor(e){switch(this.title=e,this.window.classList.add("window"),this.window.appendChild(this.topBar.getDiv()),this.addListeners(),this.topBar.addListeners(),this.container.classList.add("container"),this.window.appendChild(this.container),this.topBar.assingContainer(this.container),e){case"memory":this.container.appendChild(new D().getDiv()),this.topBar.elementbar.innerHTML="Memory";break;case"chat":this.container.appendChild(new S().getDiv()),this.topBar.elementbar.innerHTML="Chatt";break;case"tictac":const t=new M;console.log(t),this.container.appendChild(t.getDiv()),this.topBar.elementbar.innerHTML="tic-tac-toe";break}}addListeners(){this.topBar.elementbar.addEventListener("mouseout",()=>{this.moving=!1,this.window.style.cursor="default"}),this.topBar.elementbar.addEventListener("mousedown",this.downBound),this.topBar.elementbar.addEventListener("mouseup",this.upBound),this.topBar.elementbar.addEventListener("mousemove",this.moveBound)}getDiv(){return this.window}mouseDown(e){e.preventDefault(),this.window.style.cursor="move",this.moving=!0,this.initialMousePos={x:this.window.offsetLeft-e.clientX,y:this.window.offsetTop-e.clientY}}mouseUp(){this.window.style.cursor="default",this.moving=!1}moveWindow(e){e.preventDefault(),this.moving&&(this.window.style.left=e.clientX+this.initialMousePos.x+"px",this.window.style.top=e.clientY+this.initialMousePos.y+"px")}setIndex(e){this.Index=e,this.window.style.Index=e}removeListeners(){this.topBar.elementbar.removeEventListener("mousedown",this.downBound),this.topBar.elementbar.removeEventListener("mouseup",this.upBound),this.topBar.elementbar.removeEventListener("mousemove",this.moveBound)}}class T{element=document.createElement("div");elementbar=document.createElement("div");window=null;max=!1;windowPlacesMinimaized={left:0,top:0};close=document.createElement("button");maximizeWindow=document.createElement("button");minimizeWindow=document.createElement("button");hideWindow=document.createElement("button");closeWindow=null;maxWindow=new Event("max");minWindow=new Event("min");windowContainer=null;closeSocket=new Event("closeSocket");constructor(e){this.window=e,this.closeWindow=new CustomEvent("closewindow",{detail:{win:this.window},bubbles:!0}),this.element.classList.add("topBar"),this.elementbar.classList.add("elementbar"),this.element.appendChild(this.elementbar);const t=document.createElement("operationDiv");t.classList.add("operationDiv"),this.close.classList.add("close"),t.appendChild(this.close),this.close.tabIndex=-1,this.maximizeWindow.classList.add("maximize"),t.appendChild(this.maximizeWindow),this.maximizeWindow.tabIndex=-1,this.minimizeWindow.classList.add("minimize"),t.appendChild(this.minimizeWindow),this.minimizeWindow.tabIndex=-1,this.hideWindow.classList.add("hide"),t.appendChild(this.hideWindow),this.hideWindow.tabIndex=-1,this.element.appendChild(t)}getDiv(){return this.element}addListeners(){this.close.addEventListener("click",()=>{this.close.dispatchEvent(this.closeWindow),this.windowContainer.childNodes[0].dispatchEvent(this.closeSocket),this.element.parentNode.remove(),console.log("closed")}),this.maximizeWindow.addEventListener("click",()=>this.maximizeFunction()),this.minimizeWindow.addEventListener("click",()=>this.minimizeFunction()),this.hideWindow.addEventListener("click",()=>this.hideWindowFunction()),this.element.parentNode.addEventListener("keyup",e=>{switch(e.key){case"Escape":this.close.dispatchEvent(this.closeWindow),this.windowContainer.childNodes[0].dispatchEvent(this.closeSocket),this.element.parentNode.remove();break;case"PageUp":this.maximizeFunction();break;case"PageDown":this.minimizeFunction();break;case"End":this.hideWindowFunction()}})}replaceElementBar(){this.elementbar=document.createElement("div"),this.element.replaceChild(this.elementbar,this.element.childNodes[0]),this.elementbar.classList.add("elementbar")}maximizeFunction(){this.windowContainer.childNodes[0].dispatchEvent(this.maxWindow),this.max=!0,this.window.getDiv().classList.add("maxed"),this.window.removeListeners(),this.windowPlacesMinimaized.left=this.window.getDiv().offsetLeft,this.windowPlacesMinimaized.top=this.window.getDiv().offsetTop;const e=document.getElementById("space");this.window.getDiv().style.top="0px",this.window.getDiv().style.left="90px",this.window.getDiv().style.height=e.offsetHeight+"px",this.window.getDiv().style.width=e.offsetWidth-105+"px",this.maximizeWindow.style.display="none",this.minimizeWindow.style.display="block"}minimizeFunction(){this.windowContainer.childNodes[0].dispatchEvent(this.minWindow),this.max!==!1&&(this.window.getDiv().classList.remove("maxed"),this.max=!1,this.window.addListeners(),this.window.getDiv().style.top=this.windowPlacesMinimaized.top+"px",this.window.getDiv().style.left=this.windowPlacesMinimaized.left+"px",this.window.getDiv().style.height="auto",this.window.getDiv().style.width="auto",this.maximizeWindow.style.display="block",this.minimizeWindow.style.display="none")}hideWindowFunction(){this.window.getDiv().classList.add("hidden")}assingContainer(e){this.windowContainer=e}}const C=document.getElementById("space"),b=document.getElementById("active"),w=[],I=document.getElementById("memory"),P=document.getElementById("chat"),H=document.getElementById("tictac"),O=document.getElementById("navbar");O.style.zIndex=1e3;let c=0;const h=[],v={left:90,top:10};function L(n,e){n.preventDefault(),W(e)}I.addEventListener("click",n=>{L(n,"memory")});P.addEventListener("click",n=>{L(n,"chat")});H.addEventListener("click",n=>{L(n,"tictac")});function B(){c=0,h.sort((n,e)=>n.getIndex()<e.getIndex());for(let n=0;n<h.length;n++)h[n].setIndex(c),c++}function W(n){const e=new N(n);h.push(e),c+=1,e.setIndex(c),e.getDiv().addEventListener("mousedown",()=>{c+=1,c===900&&B(),e.setIndex(c)}),C.appendChild(e.getDiv()),e.getDiv().style.left=v.left+"px",e.getDiv().style.top=v.top+"px",v.left+=10,v.top+=10,e.getDiv().focus(),z(e,n+"App")}function z(n,e){const t=document.createElement("button");t.classList.add(e),t.addEventListener("click",()=>{n.getDiv().classList.contains("hidden")&&n.getDiv().classList.remove("hidden"),n.getDiv().focus(),c+=1,c===900&&B(),n.setIndex(c)}),b.appendChild(t),w.push(t)}document.addEventListener("closewindow",function(n){if(console.log("Close event received for:",n.detail.win),h.includes(n.detail.win)){const e=h.indexOf(n.detail.win);console.log("Closing window at index:",e),b.removeChild(w[e]),C.removeChild(h[e].getDiv()),h.splice(e,1),w.splice(e,1)}});const f=document.createElement("div");f.classList.add("dateDiv");function y(n){return n<10?"0"+n:n}function k(){const n=new Date,e=n.getDay(),t=n.getMonth(),i=n.getFullYear(),s=y(n.getHours()),a=y(n.getMinutes()),r=y(n.getSeconds()),d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["January","February","March","April","May","June","July","August","September","October","November","December"];f.innerHTML=`${d[e]}<br>${o[t]} ${n.getDate()}, ${i}<br>${s}:${a}:${r}`}C.appendChild(f);console.log("date is done",f);setInterval(k,1e3);k();
