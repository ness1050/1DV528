(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const w=document.getElementById("name-form");function D(){const e=document.createElement("span");e.textContent="⚠️ Please enter your name to start the quiz",e.classList.add("warning-sign"),w.appendChild(e)}function H(){const e=document.querySelector(".warning-sign");e&&e.remove()}function s(e,t){e==="hide"?t.style.display="none":t.style.display="block"}function R(){const e=document.getElementById("rule");setTimeout(function(){s("hide",e)},6e3)}const A=document.getElementById("time");function M(){[w,A].forEach(t=>s("show",t))}async function I(e,t=null){return t===null?await fetch(e):await fetch(e,t)}const N="https://courselab.lnu.se/quiz/question/1",B=document.getElementById("name-form"),U=document.getElementById("start"),x=document.getElementById("submit"),F=document.getElementById("question"),a=document.getElementById("answer"),h=document.getElementById("radio-buttons"),u=document.getElementById("progress-bar");let L="",f,g=0,c=[],S="",b,v,d=[];const E=document.getElementById("question-container");s("hide",E);const P=document.getElementById("result"),m=document.getElementById("result-div");s("hide",m);const y=document.getElementById("time"),K=document.getElementById("restart");M();R();function $(e){L=e.value,e.value="",s("hide",B),s("show",E)}function j(){clearInterval(v),setInterval(W(10),1e4)}function C(){u.style.transition="none",u.style.width="100%",u.style.backgroundColor="green"}function W(e){u.style.transition="all 1s linear",y.innerHTML="time: "+e+" s",v=setInterval(()=>{e-=1,e<0?p("Time's up <br> Game Over"):(e===5&&(u.style.backgroundColor="orange"),e===2&&(u.style.backgroundColor="red"),u.style.width=`${e/10*100}%`,y.innerHTML="time: "+e+" s")},1e3)}U.addEventListener("click",e=>{e.preventDefault(),H();const t=document.getElementById("name");t.value===""?D():q(t)});async function q(e){$(e),s("hide",m);const t=await I(N);t.status===200?(f=Date.now(),T(await t.json()),document.getElementById("question-container").focus()):(alert("Some problem occured!"),console.log("error occured"))}function T(e){clearInterval(b);const t=document.getElementById("question");F.innerHTML=e.question,"alternatives"in e?(g=1,s("hide",a),s("show",h),c=[],J(e.alternatives),t.parentElement.tabIndex=3,c.forEach((o,r)=>{o.tabIndex=3+r}),c.length>0&&c[0].focus()):(g=0,s("show",a),s("hide",h),a.tabIndex=4,t.parentElement.tabIndex=3,a.focus()),"nextURL"in e&&(S=e.nextURL),b=j()}x.addEventListener("click",e=>{if(e.preventDefault(),g===0&&a.value==="")p("You Did not answer the question!");else{const t=Q(),o={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:g===0?a.value:t})};h.replaceChildren(),a.value="",z(S,o)}});async function z(e,t){const o=await I(e,t),r=await o.json();if(C(),o.status===200)if("nextURL"in r){const n=await fetch(r.nextURL);T(await n.json())}else f=(Date.now()-f)/1e3,d.push({name:L,time:f}),p("Wow!, a very fast win!<br><br>time: "+f+" s");else o.status===400&&p(r.message+"<br> Game Over")}function J(e){for(const t in e){const o=document.createElement("label"),r=document.createElement("input");o.classList.add("label"),o.innerText=e[t],o.name=t,o.id="0",r.type="radio",r.name="radio-group",o.appendChild(r),h.appendChild(o),c.push(o),o.addEventListener("click",()=>{k(o);for(let n=0;n<c.length;n++)c[n].id="0",c[n].style.borderColor="black",c[n].style.backgroundColor="rgba(0, 60, 255, 0.349)",c[n].style.border="1px solid";a.style.borderColor="black",a.style.backgroundColor="white",o.id=o.id==="1"?"0":"1",r.tabIndex=5}),c.length>0&&c[0].focus()}}function k(e){e.id=e.id==="1"?"0":"1",e.style.borderColor=e.id==="1"?"green":"red",e.style.backgroundColor=e.id==="1"?"rgba(0, 255, 0, 0.5)":"rgba(0, 60, 255, 0.349)",e.style.border=e.id==="1"?"2px solid":"1px solid",x.disabled=e.id!=="1"}function Q(){for(let e=0;e<c.length;e++)if(c[e].id==="1")return c[e].name;return""}function p(e){clearInterval(b),clearInterval(v),P.innerHTML=e,s("show",m),s("hide",y),s("hide",E),O()}document.getElementById("Highscore-btn").addEventListener("click",function(){O()});function O(){const e=JSON.parse(localStorage.getItem("highScoreList"));e?.forEach(i=>d.push(i)),d.sort((i,l)=>i.time-l.time),d=d.slice(0,5),localStorage.setItem("highScoreList",JSON.stringify(d));const t=document.getElementById("score-table");t.replaceChildren();const o=document.createElement("thead"),r=document.createElement("tr");r.innerHTML="<th>name</th><th>Time</th>",o.appendChild(r),t.appendChild(o);const n=document.createElement("tbody");d.forEach(i=>{const l=document.createElement("tr");l.innerHTML=`<td>${i.name}</td><td>${i.time}</td>`,n.appendChild(l)}),t.appendChild(n),m.appendChild(t),s("show",m)}function G(){localStorage.removeItem("highScoreList")}window.addEventListener("load",()=>{G()});K.addEventListener("click",e=>{e.preventDefault(),d=[],C(),E.style.display==="none"&&s("hide",m),s("show",B),s("show",y)});function Y(e){switch(e.key){case"Enter":V();break;case"ArrowUp":e.preventDefault(),X();break;case"ArrowDown":e.preventDefault(),Z();break}}document.addEventListener("keydown",Y);function V(){const e=document.activeElement;e.id==="start"?q():e.classList.contains("label")&&(k(e),e.querySelector('input[type="radio"]').focus(),e.querySelector('input[type="radio"]').focus())}function X(){const e=document.activeElement,t=document.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'),r=(Array.from(t).indexOf(e)-1+t.length)%t.length;t[r].focus()}function Z(){const e=document.activeElement,t=document.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'),r=(Array.from(t).indexOf(e)+1)%t.length;t[r].focus()}
